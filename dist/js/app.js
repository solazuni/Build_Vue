(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},14:function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,s=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(s.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new a(s.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(3),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(1))},16:function(t,e,n){n(35),t.exports=n(37)},17:function(t,e,n){window.axios=n(4),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",window.Vue=n(13)},2:function(t,e){var n,i,s=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var u,d=[],c=!1,l=-1;function m(){c&&u&&(c=!1,u.length?d=u.concat(d):l=-1,d.length&&f())}function f(){if(!c){var t=r(m);c=!0;for(var e=d.length;e;){for(u=d,d=[];++l<e;)u&&u[l].run();l=-1,e=d.length}u=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function h(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new v(t,e)),1!==d.length||c||r(f)},v.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=h,s.addListener=h,s.once=h,s.off=h,s.removeListener=h,s.removeAllListeners=h,s.emit=h,s.prependListener=h,s.prependOnceListener=h,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},3:function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,s,a,o,r,u=1,d={},c=!1,l=t.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(t);m=m&&m.setTimeout?m:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick((function(){v(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((a=new MessageChannel).port1.onmessage=function(t){v(t.data)},i=function(t){a.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(s=l.documentElement,i=function(t){var e=l.createElement("script");e.onreadystatechange=function(){v(t),e.onreadystatechange=null,s.removeChild(e),e=null},s.appendChild(e)}):i=function(t){setTimeout(v,0,t)}:(o="setImmediate$"+Math.random()+"$",r=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&v(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),i=function(e){t.postMessage(o+e,"*")}),m.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var s={callback:t,args:e};return d[u]=s,i(u),u++},m.clearImmediate=f}function f(t){delete d[t]}function v(t){if(c)setTimeout(v,0,t);else{var e=d[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{f(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(1),n(2))},35:function(t,e,n){"use strict";n.r(e);function i(t,e,n,i,s,a,o,r){var u,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=n,d._compiled=!0),i&&(d.functional=!0),a&&(d._scopeId="data-v-"+a),o?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},d._ssrRegister=u):s&&(u=r?function(){s.call(this,this.$root.$options.shadowRoot)}:s),u)if(d.functional){d._injectStyles=u;var c=d.render;d.render=function(t,e){return u.call(e),c(t,e)}}else{var l=d.beforeCreate;d.beforeCreate=l?[].concat(l,u):[u]}return{exports:t,options:d}}var s=i({props:[],data:function(){return{items:[{name:"資優生",students:[{name:"A",sex:"M",age:19}]},{name:"放牛班",students:[]},{name:"特別分班",students:[]}],editIndex:-1}},methods:{setIndex:function(t){var e=this;this.editIndex=t,this.$nextTick((function(){e.$refs.students&&e.$refs.students[t]&&e.$refs.students[t].focus()}))},removeIndex:function(t){this.items.splice(t,1)},doAdd:function(t){this.items.push({name:t,students:[]})},toEdit:function(t){var e=this.items[t];this.$emit("edit",t,e)},update:function(t,e){this.items[t]=e}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-dark"},[t._m(0),t._v(" "),n("tbody",t._l(t.items,(function(e,i){return n("tr",{key:i},[n("td",[n("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(e){return t.toEdit(i)}}},[n("i",{staticClass:"fas fa-edit"}),t._v(" 編輯")]),t._v(" "),n("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(e){return t.removeIndex(i)}}},[n("i",{staticClass:"far fa-trash-alt"}),t._v(" 刪除")])]),t._v(" "),n("td",[n("span",{directives:[{name:"show",rawName:"v-show",value:t.editIndex!=i,expression:"editIndex != index"}],on:{click:function(e){return t.setIndex(i)}}},[t._v(t._s(e.name))]),t._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:t.editIndex==i,expression:"editIndex == index"},{name:"model",rawName:"v-model",value:e.name,expression:"item.name"}],ref:"students",refInFor:!0,staticClass:"form-control form-control-sm",attrs:{type:"text"},domProps:{value:e.name},on:{blur:function(e){return t.setIndex(-1)},input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}})])])})),0)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("功能")]),this._v(" "),e("th",[this._v("名稱")])])])}],!1,null,null,null).exports,a=i({props:[],data:function(){return{name:""}},methods:{doAdd:function(){if(!this.name)return alertify.error("名稱未輸入!");this.$emit("add",this.name),this.name=""},enterDoAdd:function(t){13!=t.keyCode&&13!=t.which||this.doAdd()}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-group"},[n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"輸入名稱"},domProps:{value:t.name},on:{keyup:t.enterDoAdd,input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),n("span",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-primary btn-sm",on:{click:t.doAdd}},[t._v("新增")])])])])}),[],!1,null,null,null).exports,o=i({props:[],data:function(){return{items:[],data:{name:"",sex:"",age:""},editIndex:-1,mode:"add"}},methods:{load:function(t){this.items=JSON.parse(JSON.stringify(t))||[]},toEdit:function(t){this.editIndex=t,this.data=JSON.parse(JSON.stringify(this.items[t])),this.mode="edit"},removeIndex:function(t){this.items.splice(t,1)},doSave:function(){this.$emit("save",this.items)},doAdd:function(){if(!this.valid())return!1;this.items.push(JSON.parse(JSON.stringify(this.data))),this.reset()},doUpdate:function(){if(!this.valid())return!1;this.mode="add",this.items[this.editIndex]=JSON.parse(JSON.stringify(this.data)),this.reset()},reset:function(){for(var t in this.data)this.data[t]=""},valid:function(){for(var t in this.data)if(!this.data[t])return alertify.error("欄位未填寫"),this.$refs[t].focus(),!1;return!0}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"form-group col-sm-4"},[n("label",{attrs:{for:""}},[t._v("名稱")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],ref:"name",staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group col-sm-4"},[n("label",{attrs:{for:""}},[t._v("性別")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.data.sex,expression:"data.sex"}],ref:"sex",staticClass:"form-control",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.data,"sex",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("選擇性別")]),t._v(" "),n("option",{attrs:{value:"M"}},[t._v("男")]),t._v(" "),n("option",{attrs:{value:"F"}},[t._v("女")]),t._v(" "),n("option",{attrs:{value:"X"}},[t._v("未知")])])]),t._v(" "),n("div",{staticClass:"form-group col-sm-4"},[n("label",{attrs:{for:""}},[t._v("年齡")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.data.age,expression:"data.age"}],ref:"age",staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.data.age},on:{input:function(e){e.target.composing||t.$set(t.data,"age",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"form-group text-right"},[n("button",{directives:[{name:"show",rawName:"v-show",value:"add"==t.mode,expression:"mode == 'add'"}],staticClass:"btn btn-primary btn-sm",on:{click:t.doAdd}},[t._v("新增")]),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:"edit"==t.mode,expression:"mode == 'edit'"}],staticClass:"btn btn-success btn-sm",on:{click:t.doUpdate}},[t._v("更新")]),t._v(" "),n("button",{staticClass:"btn btn-danger btn-sm",on:{click:t.doSave}},[t._v("儲存")])]),t._v(" "),n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-dark"},[t._m(0),t._v(" "),n("tbody",t._l(t.items,(function(e,i){return n("tr",{key:i},[n("td",[n("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(e){return t.toEdit(i)}}},[n("i",{staticClass:"fas fa-edit"}),t._v(" 編輯")]),t._v(" "),n("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(e){return t.removeIndex(i)}}},[n("i",{staticClass:"far fa-trash-alt"}),t._v(" 刪除")])]),t._v(" "),n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v(t._s(e.sex))]),t._v(" "),n("td",[t._v(t._s(e.age))])])})),0)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("功能")]),this._v(" "),e("th",[this._v("名稱")]),this._v(" "),e("th",[this._v("性別")]),this._v(" "),e("th",[this._v("年齡")])])])}],!1,null,null,null).exports,r=i({props:[],data:function(){return{name:""}},methods:{load:function(t){this.name=t},doSave:function(){if(!this.name)return this.$refs.name.focus(),alertify.error("未輸入名稱");this.$emit("save",this.name)}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v("清冊名稱")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"name",staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group text-right"},[n("button",{staticClass:"btn btn-danger btn-sm",on:{click:t.doSave}},[t._v("儲存")])])])}),[],!1,null,null,null).exports;n(17),new Vue({el:"#app",components:{StudentNameList:s,AddStudent:a,StudentTable:o,EditListName:r},data:function(){return{title:"Student List",editIndex:-1,editData:{},mode:"list"}},methods:{doAdd:function(t){this.$refs.table.doAdd(t)},toList:function(){this.mode="list"},toEdit:function(t,e){this.mode="edit",this.editIndex=t,this.editData=e,this.$refs.editListName.load(e.name),this.$refs.studentTable.load(e.students)},doSaveName:function(t){this.editData.name=t,this.$refs.table.update(this.editIndex,this.editData),alertify.success("儲存完成")},doSaveStudents:function(t){this.editData.students=t,this.$refs.table.update(this.editIndex,this.editData),alertify.success("儲存完成")}}}),window.alertify=n(15)},37:function(t,e){}},[[16,1,2]]]);